<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <!-- $Id: perso.txt,v 5.10 2007/06/12 11:48:24 ddr Exp $ -->
  <!-- Copyright (c) 1998-2007 INRIA -->
  <!-- Modified mickroue(a)yahoo.fr 20130710 templ=templm -->
  <title>%if;(evar.del = "on")[*delete]...[person/persons]1...[family/families]1...%else;%first_name; %surname;%end;</title>
  <meta name="robots" content="none"%/>
  <meta name="format-detection" content="telephone=no"%/>
  <meta http-equiv="Content-Type" content="text/html; charset=%charset;"%/>
  <meta http-equiv="Content-Style-Type" content="text/css"%/>
  <link rel="shortcut icon" href="%image_prefix;/favicon_gwd.png"%/>
  %include.css;
  <script type="text/javascript" src="templm/perso_accesskey.js"></script>
  <script type="text/javascript" src="templm/summary.js"></script>
  <style type="text/css">
    %if;(evar.wide = "on")
      .col1,.col2{width:99%%;}
      .image_sheet{font-size:89%%;}
    %else;
       .col1,.col2{width:48.5%%;min-width:290px;}
       .image_sheet {font-size: 71%%;}
    %end;
  </style>
  %base_header;
</head>

%( <!-- Begin define --> %)
  %let;birth_symbol;%if;(bvar.birth_symbol != "")%bvar.birth_symbol;%else;&deg;%end;%in;
  %let;death_symbol;%if;(bvar.death_symbol != "")%bvar.death_symbol;%else;&dagger;%end;%in;
  %let;l_child;%if;(bvar.always_surname = "yes" and evar.always_surname != "no")child%else;child_name%end;%in;
  %let;l_hh;%if;(sex=0)[him/her]0%elseif;(sex=1)[him/her]1%else;0%end;%in;
  %let;l_maxlev0;%if;(evar.maxlev != "")%evar.maxlev;%elseif;(bvar.maxlev != "")%bvar.maxlev;%else;1%end;%in;
  %let;l_maxlev;%if;(has_children and l_maxlev0 > max_desc_level)%max_desc_level;%else;%l_maxlev0;%end;%in;
  %let;l_url;;wide=%evar.wide;;maxlev=%l_maxlev;;image=%evar.image;;spouse=%evar.spouse;;%in;
  %let;l_ldates;
    %if;(evar.del="on")
      class="del" target="ifr" onclick="javascript:deleted(this);"
      title="[delete::person/persons]0"
      href="%prefix;m=DEL_IND_OK;%nn;
    %else;
      onclick="window.open(this.href); return false;"
      title="[modify::person/persons]0"
      href="%prefix;m=MOD_IND;%nn;
    %end;
  %in;
  %let;l_lmarriage1;
    %if;(evar.del="on" and wizard)
      class="del" target="ifr" onclick="javascript:deleted(this);"
      href="%prefix;m=DEL_FAM_OK;%nn;
    %elseif;(wizard)
      onclick="window.open(this.href); return false;"
      href="%prefix;m=MOD_FAM;%nn;
    %else;
      href="#%nn;
    %end;
  %in;
  %let;l_lmarriage2;
    %if;(not cancel_links)
      %if;(evar.del="on" and wizard)
        %nl; [delete::family/families]0%nn;
      %elseif;(wizard)
        %nl; [modify::family/families]0%nn;
      %end;
    %end;
  %in;

  %define;init_count(prev_count)
    %reset_count;
    %for;i;0;prev_count;
      %incr_count;
    %end;
  %end;

  %define;letter(xx)
    %apply;nth%with;
      /A/B/C/D/E/F/G/H/I/J/K/L/M/N/O/P/Q/R/S/T/U/V/W/X/Y/Z%and;
      xx%end;
  %end;

  %define;link_dates(xx)
    %if;(wizard and not cancel_links)
      <a id="xx_%xx.index;" %l_ldates;i=%xx.index;">
        %if;(xx.dates != "")%nn;
          %xx.dates;%nn;
        %elseif;(xx.is_dead) %death_symbol;%nn;
        %else; %birth_symbol;%nn;
        %end;%nn;
      </a>%nn;
    %else;
      %xx.dates;%nn;
    %end;
  %end;

  %define;link_marriage(xx)
    %if;(not cancel_links)
      %let;him;[him/her]0 %nn;
        %if;(xx.computable_marriage_age)
          %xx.marriage_age;%nn;
        %else; ? [years old]%end;%nn;
      %in;
      %let;her;[him/her]1 %nn;
        %if;(xx.spouse.computable_marriage_age)
          %xx.spouse.marriage_age;%nn;
        %else; ? [years old]%end;%nn;
      %in;
      <a id="f%family.index;" %l_lmarriage1;i=%family.index;;ip=%index;"
         title=" %him;%nl; %her; %l_lmarriage2;"
         >&amp;%if;(on_marriage_date != "")%marriage_date.prec;%marriage_date.year;%end;</a>
    %else;
      &amp;%if;(on_marriage_date != "")%marriage_date.prec;%marriage_date.year;%end;
    %end;
  %end;

  %define;a_title(xx)
    %if;(xx.has_parents and xx.birth_date.year != "")
       [father/mother]0 %nn;
      %if;(xx.father.has_birth_date)%xx.father_age_at_birth;%else;? [years old]%end;
      %nl; [father/mother]1 %nn;
      %if;(xx.mother.has_birth_date)%xx.mother_age_at_birth;%else;? [years old]%end;
    %end;
    %if;(xx.computable_death_age)%nl; %death_symbol%xx.death_age;%end;
    %if;(xx.computable_age)%nl; %birth_symbol;%xx.age;%end;
  %end;

  %define;link_name(xx)
    %if;(cancel_links or xx.is_restricted)
      %xx;%nn;
    %else;
      <a href="%prefix;%xx.access;%l_url;"
      title="%apply;a_title("xx")">%xx;</a>%nn;
    %end;
  %end;

  %define;link_name1(xx,yy,zz)
    %if;(cancel_links or xx.is_restricted)
      %yy;%nn;
    %else;
      <a href="%prefix;%xx.access;%l_url;"
      title="%apply;a_title("xx")" zz>%yy;</a>%nn;
    %end;
  %end;

  %define;link_image(xx)
    <a onclick="window.open(this.href); return false;" class="image"
      href="%xx.image_html_url;">
      <img src="%xx.image_url;" alt="[image/images]0"%/>
    </a>
  %end;

  %define;somebody(xx)
    %apply;link_name("xx")
    %xx.title;
    %apply;link_dates("xx")
  %end;

  %define;somebody1(xx,yy,zz)
    %apply;link_name1("xx","yy","zz")
    %xx.title;
    %apply;link_dates("xx")
  %end;

  %define;child_long_info(curlev,maxlev)
    %let;next_chi;chi_%if;(nb_children != child_cnt)%family_cnt;_%expr(child_cnt + 1)%else;1_1%end;%in;
    %apply;somebody1%with;
      child%and;
      %l_child;%and;
      %if;(curlev = 1)id="chi_%family_cnt;_%child_cnt;"%if;(child.has_sosa) name="sosa" %end;
        onkeypress="javascript:return acc_key(this,event,'sib_1','spo_%family_cnt;','%next_chi;','child_%child.index;','0','0','0');"
      %end;
    %end;
    %if;(has_families)
      %if;(evar.image="on")
        %foreach;family;
            %if;(evar.spouse != "off")
              <div class="image_sheet" style="font-size: 80%%;">
                  %if;(spouse.has_image)%apply;link_image("spouse")<br%/>%end;
                  %apply;somebody("spouse")
              </div>
            %end;
            %if;(curlev < maxlev)
              %if;(has_children)
                %foreach;child;
                  <div class="image_sheet" style="font-size: 75%%;margin-left: 8%%; border: dashed 1px %highlight;;">
                    %if;(child.has_image)%apply;link_image("child")<br%/>%end;
                    %apply;child_long_info(curlev+1,maxlev)
                  </div>
                %end;
              %end;
            %end;
        %end;
      %else;
        %foreach;family;
          %if;(evar.spouse != "off")
            <small>
              %if;(self.sex = 0)
                %apply;link_marriage("self")
              %else;
                %apply;link_marriage("self.spouse")
              %end;
              %sp;%apply;somebody("spouse")
            </small>
          %end;
          %if;(curlev < maxlev)
            %if;(has_children)
              <ol>
              %foreach;child;
                <li class=%if;(has_sosa)"border_sosa"%else;"border_family_%has_families; border_sex_%sex;"%end;>%apply;child_long_info(curlev+1,maxlev)</li>
              %end;
              </ol>
            %end;
          %end;
        %end;
      %end;
    %end;
  %end;

  %define;children_list()
    %if;has_children;
      %if;(evar.image="on")
        %foreach;child;
          <div class="image_sheet ">
            %if;(has_image)%apply;link_image("self")<br%/>%end;
            %apply;child_long_info(1,l_maxlev)
          </div>
        %end;
      %else;
        <ol>
        %foreach;child;
          <li class=%if;(has_sosa)"border_sosa"%else;"border_family_%has_families; border_sex_%sex;"%end;>
            %apply;child_long_info(1,l_maxlev)
          </li>
        %end;
        </ol>
      %end;
    %end;
  %end;

  %define;advanced(z1,z2)
    %if;(not cancel_links and bvar.hide_advanced_request != "yes")
      %let;x1;
        %prefix;m=H;v=advanced;focus=z1;birth1_yyyy=%birth_date.year;;death2_yyyy=%death_date.year;;z1=%nn;
      %in;
      <a class="date" href="javascript:void()" onclick="javascript:adv('%x1;',this)" title="[advanced request]">z2</a>%nn;
    %else;
      z2%nn;
    %end;
  %end;

  %define;type_marriage()
     %if;are_married;[*married]
     %elseif;are_not_married;[*not married]
     %elseif;are_engaged;[*engaged]
     %elseif;is_no_sexes_check;[*not married]
     %elseif;is_no_mention;~
     %end;
  %end;

  %define;marriage_date_place()
    %if;(marriage_place = "")
      %if;(on_marriage_date = "")
      %else; <em>%on_marriage_date;</em>%nn;
      %end;
    %else;
      %if;(on_marriage_date = "")<em> [in (place)] %apply;advanced("marriage_place",marriage_place)</em>%nn;
      %else; <em>%on_marriage_date; [in (place)] %apply;advanced("marriage_place",marriage_place)</em>%nn;
      %end;
    %end;
  %end;

  %define;content_marriage(xx)
    %if;are_divorced;… [divorced]%divorce_date;%nn;
    %elseif;are_separated;… [separated]%nn;
    %end;
    %if;has_witnesses;
      %if;cancel_links;
         ; [witness/witnesses]w :%sp;%nn;
      %else;
        %reset_count;%nn;
         ; <a href="%prefix;spouse=on;m=RLM;image=%evar.image;;%nn;
        %if;(not browsing_with_sosa_ref)
          %foreach;witness;%nn;
            %incr_count;%nn;
            i%count;=%witness.index;;%nn;
            t%count;=%expr((count / 2) + 1);%nn;
            %incr_count;%nn;
            i%count;=%index;;%nn;
          %end;
          t%count;=0;%nn;
        %else;
          %foreach;witness;
            %incr_count;%nn;
            i%count;=%witness.index;;%nn;
            t%count;=%expr((count / 2) + 1);%nn;
            %incr_count;%nn;
            i%count;=%sosa_ref.index;;%nn;
          %end;
          t%count;=sosa_1;%nn;
        %end;
        %incr_count;%nn;
        i%count;=%xx.index;;%nn;
        t%count;=%apply;nth([husband/wife],xx.sex);%nn;
        %incr_count;%nn;
        i%count;=%spouse.index;;%nn;
        t%count;=%apply;nth([husband/wife],spouse.sex);%nn;
        " title="[shortest path]"><em>[witness/witnesses]w :%sp;</em></a>%nn;
      %end;
      %foreach;witness;
        %if;not is_first;, %end;
        %apply;somebody("witness")%nn;
        %( <!-- Begin personalization mickroue --> %)
        %if;(witness.has_qualifiers and witness.title=", <em>Cousin</em>")
            <a onclick="window.open(this.href); return false;" href="http://geneaweb.org/%witness.qualifier;?templ=mobile;m=N;v=%surname;" title="Arbre en ligne sur Geneanet">@</a>%nn;
        %end;%nn;
        %( <!-- End personalization mickroue --> %)
      %end;%nn;
    %end;
    %if;has_comment; ;%sp;%comment;%end;
  %end;

  %define;content_family(xx,yy)
    %if;(evar.image="on")
      <div class="image_sheet">
        %if;(xx.has_image)%apply;link_image("xx")<br%/>%end;
        %xx;%xx.title; %xx.dates;
      </div>
      <div class="image_sheet">
        %if;(xx.sex = 0)
          %apply;link_marriage("xx")
        %else;
          %apply;link_marriage("xx.spouse")
        %end;
      </div>
      <div class="image_sheet" style="clear:right;">
        %if;(yy.has_image)%apply;link_image("yy")<br%/>%end;
        %apply;somebody1%with;yy%and;yy%and;%end;
      </div>
    %else;
      %let;next_spo;spo_%if;(nb_families != family_cnt)%expr(family_cnt + 1)%else;1%end;%in;
      %if;(xx.sex = 0)
        %apply;link_marriage("xx")
      %else;
        %apply;link_marriage("xx.spouse")
      %end;%sp;
      %apply;somebody1%with;
        yy%and;
        yy%and;
        id="spo_%family_cnt;"
        onkeypress="javascript:return acc_key(this,event,'sib_1','%next_spo;','chi_%family_cnt;_1','spouse_%spouse.index;','0','0','f%family.index;');"
      %end;
    %end;
    <br style="clear: both;"%/>
    %apply;type_marriage()
    %apply;marriage_date_place()
    %apply;content_marriage("xx")
    <br%/>
    %apply;children_list()
  %end;

  %define;parents(xx,yy,zz)
    %foreach;xx.parent;
        %let;l_sosa;%if;parent.is_female;%expr(zz + 1)%else;%zz;%end;%in
        <span %if;(parent.has_sosa)class="color_sosa"%end;>
          yy
          %if;(parent.has_siblings)
            &diams;
          %elseif;(parent.has_parents)
            &loz;
          %elseif;(wizard and not cancel_links)
            <a id="add_par_%l_sosa;" style="color:#FF0000;" href="%prefix;m=ADD_PAR;ip=%parent.index;"
               title="[add::parents] (L)" onclick="window.open(this.href); return false;"> - </a>
          %else;
            -
          %end;
        </span>
        %apply;link_name1%with;
          parent%and;
          parent%and;
          id="par_%l_sosa;"
          onkeypress="javascript:return acc_key(this,event,'sib_1','spo_1','chi_1_1','parent_%parent.index;','add_par_%l_sosa;','par_%l_sosa;','par_%l_sosa;');"
        %end;
        %apply;link_dates("parent")
        <br%/>
    %end;
  %end;

  %define;anc_families()
    %if;has_parents;
      <div>
        <h3>[*ancestors]</h3>
        %if;(l_maxlev > 1)
          %if;father.has_parents;
            <small>
              %if;father.father.has_parents;%apply;parents("father.father","        ",8)%end;
              %apply;parents("father","    ",4)
              %if;father.mother.has_parents;%apply;parents("father.mother","        ",10)%end;
            </small>
          %end;
          %apply;parents("self","",2)
          %if;mother.has_parents;
            <small>
              %if;mother.father.has_parents;%apply;parents("mother.father","        ",12)%end;
              %apply;parents("mother","    ",6)
              %if;mother.mother.has_parents;%apply;parents("mother.mother","        ",14)%end;
            </small>
          %end;
        %else;
          %if;father.has_parents;<small>%apply;parents("father","    ",4)</small>%end;
          %apply;parents("self","",2)
          %if;mother.has_parents;<small>%apply;parents("mother","    ",6)</small>%end;
        %end;
      </div>
      %if;(father.nb_children > 1 or mother.nb_children > 1)
        <div>
        <h3>[*full siblings]</h3>
          <ol>
            %foreach;father.child;
              <li class=%if;(has_sosa)"border_sosa"%else;"border_family_%has_families; border_sex_%sex;"%end;>
                %if;is_self;<em>%end;
                %let;next_sib;sib_%expr(child_cnt + 1)%in;
                %apply;link_name1%with;
                  child%and;
                  %l_child;%and;
                  id="sib_%child_cnt;"
                  onkeypress="javascript:return acc_key(this,event,'%next_sib;','spo_1','chi_1_1','child_%child.index;','0','0','0');"
                %end;
                %if;is_self;</em>%end;
                %apply;link_dates("child")
              </li>
            %end;
          </ol>
          %foreach;father.family;
            %if;(spouse.index != mother.index)
              %if;has_children;
                <ol>
                  <li>[*on %s's side:::] %father; [and] %apply;somebody("spouse") :</li>
                  %foreach;child;
                    <li class=%if;(has_sosa)"border_sosa"%else;"border_family_%has_families; border_sex_%sex;"%end;>
                      %if;is_self;<em>%end;
                      %let;next_sib;sib_%expr(child_cnt + 1)%in;
                      %apply;link_name1%with;
                        child%and;
                        %l_child;%and;
                      %end;
                      %if;is_self;</em>%end;
                      %apply;link_dates("child")
                    </li>
                  %end;
                </ol>
              %end;
            %end;
          %end;
          %foreach;mother.family;
            %if;(spouse.index != father.index)
              %if;has_children;
                <ol>
                  <li>[*on %s's side:::] %mother; [and] %apply;somebody("spouse") :</li>
                  %foreach;child;
                    <li class=%if;(has_sosa)"border_sosa"%else;"border_family_%has_families; border_sex_%sex;"%end;>
                      %if;is_self;<em>%end;
                      %let;next_sib;sib_%expr(child_cnt + 1)%in;
                      %apply;link_name1%with;
                        child%and;
                        %l_child;%and;
                      %end;
                      %if;is_self;</em>%end;
                      %apply;link_dates("child")
                    </li>
                  %end;
                </ol>
              %end;
            %end;
          %end;
        </div>
      %end;
    %elseif;(wizard and not cancel_links and first_name != "?" and surname != "?")
       <div class="fam2 button">
         <a id="add_par" href="%prefix;m=ADD_PAR;ip=%index;"
            title="[add::parents] (L)" accesskey="L"
            onclick="window.open(this.href); return false;">[add::parents]</a>
       </div>
    %end;
  %end;

  %define;lex(xx,yy)
    %if;(yy = 0)[xx]0%elseif;(yy = 1)[xx]1%else;[xx]2%end;
  %end;

  %define;relation_computing()
      %let;l_rt;
        %if;(relation_type = [godfather/godmother/godparents]2
          or relation_type = [godfather/godmother/godparents]1
          or relation_type = [godfather/godmother/godparents]0)
          godfather/godmother/godparents%nn;
        %elseif;(relation_type = [adoptive father/adoptive mother/adoptive parents]2
              or relation_type = [adoptive father/adoptive mother/adoptive parents]1
              or relation_type = [adoptive father/adoptive mother/adoptive parents]0)
          adoptive father/adoptive mother/adoptive parents%nn;
        %elseif;(relation_type = [recognizing father/recognizing mother/recognizing parents]2
              or relation_type = [recognizing father/recognizing mother/recognizing parents]1
              or relation_type = [recognizing father/recognizing mother/recognizing parents]0)
          recognizing father/recognizing mother/recognizing parents%nn;
        %elseif;(relation_type = [candidate father/candidate mother/candidate parents]2
              or relation_type = [candidate father/candidate mother/candidate parents]1
              or relation_type = [candidate father/candidate mother/candidate parents]0)
          candidate father/candidate mother/candidate parents%nn;
        %elseif;(relation_type = [foster father/foster mother/foster parents]2
              or relation_type = [foster father/foster mother/foster parents]1
              or relation_type = [foster father/foster mother/foster parents]0)
          foster father/foster mother/foster parents%nn;
        %else;
         *
        %end;
      %in;
      %let;l_rt0;%if;(l_rt != "*")%apply;lex(l_rt,0)%else;*%end;%in;
      %let;l_rt1;%if;(l_rt != "*")%apply;lex(l_rt,1)%else;*%end;%in;
      %if;cancel_links;
        %apply;capitalize(relation_type) :%nn;
      %else;
        %reset_count;
        <a href="%prefix;spouse=on;m=RLM;image=%evar.image;;%nn;
        %if;(has_relation_him and relation_him.has_parents);
          %incr_count;i%count;=%relation_him.index;;t%count;=%l_rt0;;%nn;
        %end;
        %if;(has_relation_her and relation_her.has_parents);
          %incr_count;i%count;=%relation_her.index;;t%count;=%l_rt1;;%nn;
        %end;
        %incr_count;i%count;=%index;;t%count;=%l_hh;;%nn;
        %if;(browsing_with_sosa_ref)
          %incr_count;i%count;=%sosa_ref.index;;t%count;=sosa_1;%nn;
        %end;
        %incr_count;i%count;=%index;;t%count;=%l_hh;;%nn;
        " title="[shortest path]">%apply;capitalize(relation_type) :</a>%nn;
      %end;
  %end;

  %define;related_computing()
    %if;cancel_links;
      %apply;capitalize(related_type) :%nn;
    %else;
      %reset_count;
      <a href="%prefix;spouse=on;m=RLM;image=%evar.image;;%nn;
      %incr_count;i%count;=%index;;%nn;
      %incr_count;i%count;=%related.index;;t%count;=%related_type;;%nn;
      %if;(browsing_with_sosa_ref and related.index != sosa_ref.index)
        %incr_count;i%count;=%sosa_ref.index;;t%count;=sosa_1;%nn;
      %end;
      %incr_count;i%count;=%index;;t%count;=%l_hh;;%nn;
      " title="[shortest path]">%apply;capitalize(related_type) :</a>%nn;
    %end;
  %end;

  %define;witness_computing()
    %if;cancel_links;
      [*witness at marriage of %s and %s:::x:y] :%nn;
    %else;
      %reset_count;
      <a href="%prefix;spouse=on;m=RLM;image=%evar.image;;%nn;
      %if;(not browsing_with_sosa_ref)
        %foreach;witness_relation;
          %incr_count;%nn;
          i%count;=%witness_relation.father.index;;%nn;
          t%count;=%expr((count / 2) + 1);%nn;
          %incr_count;%nn;
          i%count;=%index;;%nn;
        %end;
        t%count;=0;%nn;
      %else;
        %foreach;witness_relation;
          %incr_count;%nn;
          i%count;=%witness_relation.father.index;;%nn;
          t%count;=%expr((count / 2) + 1);%nn;
          %incr_count;%nn;
          i%count;=%sosa_ref.index;;%nn;
        %end;
        t%count;=sosa_1;%nn;
        %incr_count;%nn;
        i%count;=%index;;%nn;
        t%count;=%l_hh;;%nn;
      %end;
      "
       title="[shortest path]">[*witness at marriage of %s and %s:::x:y] :</a>%nn;
       %reset_count;
    %end;
  %end;

  %define;age_at(xx)
    [age at %s birth date:::xx]%nn;
  %end;

  %define;nav_with_sosa_ref(xx)
    <a id="nav_sosa_ref" accesskey="S"
       href="%prefix_no_iz;iz=%self.index;;%self.access;%l_url;"
       title="[navigation with %t as Sosa reference:::xx] (S)">[*navigation with %t as Sosa reference:::xx]</a>
  %end;

  %define;link_ng(z1,z2)
    %if;cancel_links;z2%nn;
    %else;
      %let;x1;
        %prefix;m=NG;t=z1;%if;("z1"="P")fn=%elseif("z1"="N")sn=%else;n=%end;%nn;
      %in;
      <a href="javascript:void()" onclick="javascript:adv('%x1;',this)" title="[search/case sensitive]0">z2</a>%nn;
    %end;
  %end;

%( <!-- End define --> %)

<body%body_prop; id="perso" %if;not cancel_links;onload="javascript:document.getElementById('acckey').focus();%end;">%nn;
<div onclick="void(0);">%( the magic Safari div %)
%message_to_wizard;
%( <!-- Begin display menu2 --> %)
  %if;not cancel_links;
    <div class="menu2">
      <form id="ak" method="get" action="" style="display:inline;">
        <p style="display:inline;"><input id="acckey" style="width:15px;"
         name="acckey" accesskey="W" title="[navigation] OnKeyPress (W)" value=" " size="1" maxlength="1"
         onkeypress="javascript:return acc_key(this,event,'sib_1','spo_1','chi_1_1','mod_ind','add_par','add_fam','mod_fam_1');"
         %/></p>
      </form>
      %let;l_on;onclick="this.focus()" onkeydown="if (event.keyCode == 13) javascript:document.tools.submit();"%in;
      <form id="tools" name="tools" style="display:inline" method="get" action="%action;">
        %hidden;
        %foreach;env_binding;
          %if;(
               env.key = "cgl" or
               env.key = "image" or
               env.key = "maxlev" or
               env.key = "spouse" or
               env.key = "wide" or
               env.key = "templ" or env.key = "iz" or env.key = "pz" or env.key = "nz" or env.key = "ocz"
               )
          %else;
           <input type="hidden" name="%env.key;" value="%env.val.decoded;" %/>
          %end;
        %end;
        <div><a href="#">[*tools]</a>
        <div class="s_menu">
          %if;(not cancel_links and (not browsing_with_sosa_ref or sosa_ref.index!=index))
            %apply;nav_with_sosa_ref%with;%self;%end;
          %end;
          <fieldset>
            <label><input type="checkbox" name="cgl" value="on" %l_on;
                   %if;(evar.cgl = "on") checked="checked"%end;%/>[cancel GeneWeb links]</label>
            %if;(bvar.no_image_for_visitor != "yes" or friend or wizard)
              <label><input type="checkbox" name="image" value="on" %l_on;
                     %if;(evar.image = "on") checked="checked"%end;%/>[image/images]1</label>
            %end;
            <label><input type="checkbox" name="wide" value="on" %l_on;
                   %if;(evar.wide = "on") checked="checked"%end;%/>[visualize/show/hide/summary]0 &divide;</label>
          </fieldset>
          %if;(has_children)
            %let;l_maxvd;%expr(max_desc_level + 1)%in;
            <fieldset><legend>[*generation/generations]0</legend>
              <div class="v">
                %for;i;1;l_maxvd;
                <label>%i;<br%/>
                  <input type="radio" name="maxlev" value="%i;" %l_on;%if;(l_maxlev = i) checked="checked"%end;%/>
                </label>
                %end;
              </div>
              <label style="clear:both"><input type="checkbox" name="spouse" value="off" %l_on;
                      %if;(evar.spouse = "off") checked="checked"%end;%/>[spouses not included]</label>
            </fieldset>
          %end;
          <div class="ok"><input type="submit" value="ok"%/></div>
        </div>
        </div>
      </form>
      <a href="%prefix;" title="[visualize/show/hide/summary]3">^^</a>
    </div>
  %end;
%( <!-- End display menu2 --> %)

%if;(evar.del = "on")<h1 class="del">[*delete]… [person/persons]1… [family/families]1…</h1>
%if;(wizard and bvar.can_kill_ancestors="yes")
  <p><strong>/!\ can_kill_ancestors=yes   </strong>
     <a class="del" href="%prefix;m=KILL_ANC;i=%index;" target="ifr"
        onclick="javascript:deleted(this);" title="[delete::ancestors]0">%nn;
        %self; <em>/!\ [delete::ancestors]0 /!\</em></a>
     <strong>   can_kill_ancestors=yes /!\</strong>
  </p>
%end;
%end;
<div class="col1">
%( <!-- Begin display image, person --> %)
  <div class="person"><br>
    <h1 class="background_sex_%sex;%if;(has_sosa) h1_border_sosa%end;">
      %if;(has_public_name or has_qualifiers)
        %apply;link_ng("PN",self)
      %else;
        %apply;link_ng("P",first_name)%sp;%nn;
        %apply;link_ng("N",surname)
      %end;
      <small>%apply;link_dates("self")</small>
    </h1>
    %if;has_image;
    <div>
     <a onclick="window.open(this.href); return false;" href="%image_html_url;">
       <img class="person_img" src="%image_url;" alt="[image/images]0"%/>
     </a>
    </div>
    %end;
    <p class="data1">
      %if;has_nobility_titles;
        <br%/>
        <em>
          %foreach;nobility_title;
            %nobility_title;<br%/>
          %end;
        </em>
      %end;
      %if;(has_linked_pages and has_linked_page.HEAD)%linked_page.HEAD;<br%/>%end;
      %if;(has_nobility_titles and has_public_name)
        <br%/>%apply;link_ng("PN",public_name)
      %end;
      %if;has_qualifiers;
        %apply;lazy_print("")
        <br%/>
        %foreach;qualifier;
          %( <!-- Begin personalization mickroue --> %)
            %if;is_first;
              %if;(title=", <em>Cousin</em>")
                <strong><a onclick="window.open(this.href); return false;" href="http://geneaweb.org/%qualifier;?templ=mobile;m=N;v=%surname;" title="Arbre en ligne sur Geneanet">Arbre en ligne</a></strong><br%/>
              %end;
            %end;
          %( <!-- End personalization mickroue --> %)
          %if;not is_first;
             %if;(lazy_printed)/%end;
             %lazy_force;
             %apply;link_ng("PN",qualifier)%nn;
          %end;
        %end;
      %end;
      %if;has_aliases;
        %apply;lazy_print("")
        <br%/>
        <em><strong>%nn;
        %foreach;alias;
          %if;(lazy_printed)/%end;
          %lazy_force;
          %apply;link_ng("PN",alias)%nn;
        %end;
        </strong></em>
      %end;
      %if;(has_public_name or has_qualifiers)
        <br%/>
        <em>
        (%apply;link_ng("P",first_name)%sp;
        %apply;link_ng("N",surname))
        </em>
      %end;
      %if;has_first_names_aliases;
        %apply;lazy_print("")
        <br%/>
        %foreach;first_name_alias;
          %if;(lazy_printed)/%end;
          %lazy_force;
          %apply;advanced("first_name",first_name_alias)%nn;
        %end;
      %end;
      %if;has_surnames_aliases;
        %apply;lazy_print("")
        <br%/>
        %foreach;surname_alias;
          %if;(lazy_printed)/%end;
          %lazy_force;
          %apply;link_ng("N",surname_alias)%nn;
        %end;
      %end;
    </p>
    <p class="data2">
      %if;has_occupation;
        <span class="highlight1">%apply;advanced%with;occu%and;%apply;capitalize(occupation)%end;</span><br%/>
      %end;
      %if;(has_linked_pages and has_linked_page.OCCU)
           %linked_page.OCCU;<br%/>
      %end;
      %if;has_birth_date;
        %apply;capitalize(nth([born],sex)) %on_birth_date;
        %if;birthday; ([happy birthday to you!])%end;
        %if;has_birth_place; [in (place)] %apply;advanced("birth_place",birth_place)%end;<br%/>
        %if;(has_parents)
          %if;(father_age_at_birth != "" or mother_age_at_birth != "")
               (%nn;
                %if;(father_age_at_birth != "")[father/mother]0 %father_age_at_birth;%nn;
                  %if;(mother_age_at_birth != ""), %end;
                %end;
                %if;(mother_age_at_birth != "")[father/mother]1 %mother_age_at_birth;%end;
                )<br%/>
          %end;
        %end;
      %else;
        %if;has_birth_place;
          %apply;capitalize(nth([born],sex)) [in (place)] %apply;advanced("birth_place",birth_place)<br%/>
        %end;
      %end;
      %if;has_baptism_date;
        %apply;capitalize(nth([baptized],sex)) %on_baptism_date;
        %if;has_baptism_place; [in (place)] %apply;advanced("bapt_place",baptism_place)%end;<br%/>
      %else;
        %if;has_baptism_place;
          %apply;capitalize(nth([baptized],sex)) [in (place)] %apply;advanced("bapt_place",baptism_place)<br%/>
        %end;
      %end;
      %if;is_dead;
        %apply;capitalize(died)
        %if;has_death_date; %on_death_date;%end;
        %if;has_death_place; [in (place)] %apply;advanced("death_place",death_place)%end;<br%/>
        %if;computable_death_age;
             [age at death:] %death_age;<br%/>
        %end;
        %if;has_linked_page.DEATH;
             %linked_page.DEATH;<br%/>
        %end;
        %if;is_buried;
          %apply;capitalize(nth([buried],sex))
          %if;has_burial_date; %on_burial_date;%end;
          %if;has_burial_place; [in (place)] %apply;advanced("burial_place",burial_place)%end;<br%/>
        %end;
        %if;is_cremated;
          %apply;capitalize(nth([cremated],sex))
          %if;has_cremation_date; %on_cremation_date;%end;
          %if;has_cremation_place;, %cremation_place;%end;<br%/>
        %end;
      %end;
      %if;computable_age;
        [*age] : %age;<br%/>
      %end;
      %( <!-- Begin display sosa consang nb ancestors nb descendants --> %)
      <br%/>
      %if;(has_sosa and sosa != 1)
        %let;l_sosa_ref;
          %apply;a_of_b%with;
            %and;
            %apply;link_name("sosa_ref")
          %end;
        %in;
        %if;cancel_links;
          [*Sosa] %sosa; %l_sosa_ref;
        %else;
          <a href="%prefix;m=A;t=D;image=%evar.image;;i=%sosa_ref.index;;i1=%index;;l=%max_desc_level;" title="%apply;a_of_b%with;[ancestors]%and;%sosa_ref;%end; [up to] %self;">[*Sosa] %sosa;</a> %l_sosa_ref;%nn;
        %end;
        <br%/>
      %elseif;(sosa = 1)
        [*Sosa] 1<br%/>
      %end;
      %if;(bvar.show_consang != "no" or manitou)
        %if;(has_parents)
          %reset_count;
          %foreach;ancestor_level
            %if;(level = max_anc_level)
              %number_of_ancestors; [ancestors] / %level; [generation/generations]1%nn;
            %end;
            %foreach;ancestor
              %if;(ancestor.same != "")
                %incr_count;
              %end;
            %end;
          %end;
          %if;(has_consanguinity or count != 0)
            , <span class="nobr">
            %if;(cancel_links)
              [consanguinity] : %consanguinity;
            %else;
              <a href="%prefix;em=R;ei=%mother.index;;m=NG;t=PN;select=%father.index;;et=A;spouse=on;image=on"
                 title="[relationship computing], [parents]">[consanguinity] : %consanguinity;</a>
            %end;
            %if;(count != 0) (%nn;
              %if;(not cancel_links)
                <a href="%prefix;m=A;t=N;v=%max_anc_level;;i=%index;;same=%count;"
                   title="[display smallest sosa number relative to ancestor]">%count; ==</a>%nn;
              %else;
                %count; ==%nn;
              %end;)
            %end;
          %end;
          </span>
          <br%/>
        %end;
        %if;(has_children)
          %foreach;descendant_level;
            %if;(level = max_desc_level)
              %number_of_descendants; [descendants] / %level; [generation/generations]1
            %end;
          %end;
          <br%/>
        %end;
      %end;
      %( <!-- End display sosa consang nb ancestors nb descendants --> %)
      %if;(not cancel_links and has_linked_pages)
        <small style = "float: right;">
          (<a href="%prefix;m=LINKED;%access;">[linked pages]</a>)
        </small>
      %end;
    </p>
  </div>
%( <!-- End display image, person --> %)
  %if;(bvar.var_img_ext != "" and (has_linked_pages or wizard))
    %include.inc_mickroue2;
  %end;
%( <!-- Begin display notes, relations, sources --> %)
    %if;(has_notes or has_linked_pages)
      %if;(has_notes or has_linked_page.BNOTE or has_linked_page.NOTE)
      <div class = "notes">
        <h3>[*note/notes]1</h3>
        <dl><dd>
          %if;(has_linked_page.BNOTE)
            <p>&gt;&gt; %linked_page.BNOTE;</p>
          %end;
          %notes;
        </dd></dl>
      </div>
      %end;
    %end;
    %if;(has_relations and bvar.var_photo != "on")
      <div class = "relations">
        <h3>[*relation/relations]1</h3>
        <ul class="list_no_style">
          %foreach;relation;
            <li class="sheet"><em>%apply;relation_computing()</em>
              <ul class="list_no_style">
                %if;has_relation_him;
                  <li class="border_family_1 border_sex_0">%apply;somebody("relation_him")</li>
                %end;
                %if;has_relation_her;
                  <li class="border_family_1 border_sex_1">%apply;somebody("relation_her")</li>
                %end;
              </ul>
            </li>
          %end;
          %foreach;related;
              <li class="sheet"><em>%apply;related_computing()</em>
                <ul class="list_no_style">
                  <li class="border_family_1 border_sex_%related.sex;">%apply;somebody("related")</li>
                </ul>
              </li>
          %end;
          %reset_count;
          %foreach;witness_relation;
            %if;(count = 0)
              <li class="sheet"><em>%apply;witness_computing()</em>
              <table class="t_witness" summary="[witness at marriage of %s and %s:::x:y]">
            %end;
            <tr>
              <td>%apply;somebody("witness_relation.father")</td>
              <td>%apply;link_marriage("witness_relation.father")</td>
              <td>%apply;somebody("witness_relation.mother")</td>
            </tr>
            %incr_count;
          %end;
          %if;(count > 0)
            </table>
            %if;(count > 5)
              <em>[*total] : %count;</em>
            %end;
            </li>
          %end;
        </ul>
      </div>
    %end;
    %if;(bvar.var_photo = "on" and has_relations)
      %include.inc_mickroue1;
    %end;
    %if;(has_sources or has_linked_page.BIBLIO)
      <div class = "sources">
        <h3>[*source/sources]1</h3>
        <ul>
          %if;(has_linked_page.BIBLIO)<li>&gt;&gt; %linked_page.BIBLIO;</li>%end;
          %foreach;source;
            <li><em>%source_type; : </em>%source;</li>
          %end;
        </ul>
      </div>
    %end;
%( <!-- End display notes, relations, sources --> %)
</div>

<div class="col2">
%( <!-- Begin display families --> %)
    %apply;anc_families()
    %if;has_families;
      <div>
        <h3>[*descendants]</h3>
        %foreach;family;
          <div class="fam">
            %if;(wizard and not cancel_links and family_cnt != 1)
              %if;(family_cnt != 1)
                <span class="button"><a href="%prefix;m=INV_FAM;i=%index;;f=%family.index;
                " title="[invert] [family/families]0">^</a></span>
                %if;(family.father.index = prev_family.father.index
                  and family.mother.index = prev_family.mother.index)
                  <span class="button"><a href=%nn;
                  "%prefix;m=MRG_FAM;i=%prev_family.index;;i2=%family.index;
                  ;ip=%index;">%nn;
                  [*merge::]</a></span>
                %end;
              %end;
            %end;
            %apply;content_family("self","spouse")
            %if;(evar.opt = "from" and wizard)<em>(%origin_file;)</em>%nl;%end;
            %if;(evar.image = "on" and nb_families > 1)<hr style="clear:both;"%/>%end;
          </div>
        %end;
      </div>
    %else;
      %if;(wizard and not cancel_links)
        <div class="button">
          %if;((first_name = "?" or surname = "?") and
            (nb_families != 0 or has_parents))
          %elseif;(not is_male and not is_female)
            <a href="%prefix;m=ADD_FAM;ip=%index;;sex=M" onclick="window.open(this.href); return false;">%nn;
            [add::family/families]0 ([M/F]0)</a>
            <br%/>
            <a href="%prefix;m=ADD_FAM;ip=%index;;sex=F" onclick="window.open(this.href); return false;">%nn;
            [add::family/families]0 ([M/F]1)</a>
            <br%/>
          %else;
            <a href="%prefix;m=ADD_FAM;ip=%index;" title="[add::family/families]0 (A)" onclick="window.open(this.href); return false;">[add::family/families]0</a>
            <br%/>
          %end;
        </div>
      %end;
    %end;
%( <!-- End display families --> %)
</div>

%( <!-- Begin display menu --> %)
  %if;not cancel_links;
    <div class="%if;(bvar.menu != "")%bvar.menu;%else;menu%end;">
      %if;wizard;
        <span><a id="upd" href="%prefix;m=U;%access;" title="[update] (U)" accesskey="U">[*update]</a>
          <span class="s_menu">
            %if;(bvar.history_diff="yes" and has_history)
              <a href="%prefix;m=HIST_DIFF;t=SUM;f=%history_file;">[history]</a>%nn;
            %end;
            <a id="mod_ind" href="%prefix;m=MOD_IND;i=%index;" title="[modify::person/persons]0 (P)" accesskey="P" onclick="window.open(this.href); return false;">[modify::person/persons]0</a>%nn;
              %foreach;family;
                %if;(family_cnt < 4)
                  %let;a_k;%if;(family_cnt = 1)F%elseif;(family_cnt = 2)G%elseif;(family_cnt = 3)H%end;%in;
                  <a id="mod_fam_%family_cnt;" href="%prefix;m=MOD_FAM;i=%family.index;;ip=%index;" title="[modify::family/families]0 %family_cnt; (%a_k;)"
                     accesskey="%a_k;" onclick="window.open(this.href); return false;">[modify::family/families]0 %family_cnt;</a>%nn;
                %else;
                  <a id="mod_fam_%family_cnt;" href="%prefix;m=MOD_FAM;i=%family.index;;ip=%index;" title="[modify::family/families]0 %family_cnt;"
                     onclick="window.open(this.href); return false;">[modify::family/families]0 %family_cnt;</a>%nn;
                %end;
              %end;
            <a id="add_fam" href="%prefix;m=ADD_FAM;ip=%index;" title="[add::family/families]0 (A)" accesskey="A" onclick="window.open(this.href); return false;">[add::family/families]0</a>%nn;
            <a id="snd_image" href="%prefix;m=SND_IMAGE;i=%index;" title="[send::image/images]0 (I)" accesskey="I">[send::image/images]0</a>%nn;
            <a href="%prefix;m=MRG;i=%index;">[merge]0 (oc=%occ;)</a>%nn;
            %if;(evar.del = "on")
              <a style="text-decoration:line-through;"
                 href="%prefix;%access;%l_url;">[delete]</a>%nn;
            %else;
              <a href="%prefix;%access;%l_url;i=%index;;del=on;">[delete]</a>%nn;
            %end;
          </span>
        </span>
      %end;
      %if;has_parents;
        <span>
          <a href="%prefix;m=A;%access;">[*ancestors]</a>
          <span class="s_menu">
            <a id="anc_tree" href="%prefix;m=A;t=T;v=4;image=on;marriage=on;%access;"
               title="[tree] (Y)" accesskey="Y">[tree]</a>%nn;
            <a href="%prefix;m=A;t=F;tf1=sb;v=%max_anc_level;;maxv=%max_anc_level;;i=%index;">[surnames branch]</a>%nn;
            <a href="%prefix;m=A;t=Z;image=%evar.image;;v=7;maxv=%max_anc_level;;%access;">[table]</a>%nn;
            <a href="%prefix;m=A;t=G;v=4;maxv=%max_anc_level;;siblings=on;spouse=on;parents=on;alias=on;rel=on;notes=on;src=on;%access;">[long display]</a>%nn;
          </span>
        </span>
      %end;
      %if;has_children;
        <span>
          <a href="%prefix;m=D;%access;">[*descendants]</a>
          <span class="s_menu">
            <a href="%prefix;m=D;t=T;v=4;image=on;%access"
               %if;(not has_parents)title="[tree] (Y)" accesskey="Y"%end;>[tree]</a>%nn;
            <a href="%prefix;m=D;t=A;v=%max_desc_level;;maxv=%max_desc_level;;num=on;%access">d’Aboville</a>%nn;
            <a href="%prefix;m=D;t=L;v=3;maxv=%max_desc_level;;alias=on;rel=on;spouse=on;parents=on;notes=on;src=on;%access;">[long display]</a>%nn;
          </span>
        </span>
      %end;
      <span><a id="rela_comp" href="%prefix;m=R;%access;" title="[relationship computing] (R)" accesskey="R" >[*relationship computing]</a>
        <span class="s_menu">
          %if;(browsing_with_sosa_ref)
            %if;(sosa_ref.index != "" and sosa_ref.index != index)
              <a href="%prefix;em=R;ei=%index;;i=%sosa_ref.index;;m=NG;n=1;t=PN;spouse=on;image=on;et=S" title="…[shortest path]… %sosa_ref;">[shortest path]</a>%nn;
            %end;
          %end;
          <a href="%prefix;%access;;m=A;t=F;tf1=fam70;v=3;maxv=4;cousins=on;image=%evar.image;">7 [family/families]1</a>%nn;
          %if;(has_parents)
            %if;(father.has_siblings or mother.has_siblings)
              <a href="%prefix;%access;;m=C;v1=2;v2=1">[uncles and aunts]</a>%nn;
            %end;
          %end;
          %if;has_nephews_or_nieces;
            <a href="%prefix;%access;;m=C;v1=1;v2=2">[nephews and nieces]</a>%nn;
          %end;
        </span>
      </span>
      <br>
      %if;(wizard or friend)
        <span style="background-color:ivory" >&nbsp;%[%[%first_name_key_val;/%surname_key_val;/%occ;/%first_name; %surname;%]%]</span>
      %end;
    </div>
      %if;(wizard)
      <span>&nbsp;
        <a href="%prefix;;em=R;ei=%index;;m=NG;select=input;n=%user.name;;t=PN;spouse=on;long=on;et=S">
        <img src="%image_prefix;/link.jpg" alt="W"%/>%nn;
        </a>
        %if;(bvar.show_invisible = "on")
          <a href="%bvar.Base_Wiz;_f?lang=%evar.lang;;%if;(evar.templ!="")templ=%evar.templ;;%end;i=%index;;o=%occ;">
          %if;is_friend;
            <img src="%image_prefix;/friend.gif"%wid_hei;restricted.png; alt=" (f)"%/>%nn;
          %elseif;is_invisible;
            <img src="%image_prefix;/restricted.png"%wid_hei;restricted.png; alt=" (x)"%/>%nn;
          %else;
            <img src="%image_prefix;/1pixel.png"%wid_hei;restricted.png; alt=" "%/>%nn;
          %end;
          </a>
          %if;(bvar.wizard_not_wizard!="yes")
            <a href="%bvar.Base_Wiz;_w?%nn;
              %( pourquoi ne pas utiliser %prefix;?? %)
              %if;(evar.lang!="")&lang=%evar.lang;%end;%nn;
              %if;(evar.templ!="")&templ=%evar.templ;%end;%nn;
              %if;(evar.dsrc!="")&dsrc=%evar.dsrc;%end;%nn;
              %( TO DO généraliser foreach env_binding dans les aurtes cas %)
              %foreach;env_binding;
                %if;(env.key != "m" and env.key != "i" and env.key != "o" and
                     env.key != "lang" and env.key != "templ and env.key != "dsrc")
                  &%env.key=%env.val;%nn;
                %end;
              %end;
              &m=MOD_IND&i=%index;&o=%occ;"><img src="%image_prefix;/b_edit.png" alt="edit"></a>
          %end;
        %end;
      </span>
      %end;
      %sp;
      <span>%include.vaetvient;</span>
    </div>
  %end;
%( <!-- End display menu --> %)
  %if;(not cancel_links and wizard and (evar.opt = "misc" or bvar.misc = "on"))
    <div id="misc">
      <form name="syntax" method="get" action="">
        <ul>
          <li>
            <label>wiki<input onclick="javascript: this.select();" type="text" name="wiki" size="50"
                            value="%[%[%first_name_key;/%surname_key;/%occ;/%self;%]%]"%/></label>
            <label>[text]<input onclick="javascript: this.select();" type="text" name="key" size="25"
                              value="%first_name_key;_%surname_key;_%occ;"%/></label>
            <label>key<input onclick="javascript: this.select();" type="text" name="key" size="25"
                           value="p=%first_name_key;;n=%surname_key;;oc=%occ;"%/></label>
            <label>index<input onclick="javascript: this.select();" type="text" name="index" size="10"
                             value="i=%index;"%/></label>
          </li>
        </ul>
      </form>
      %misc_names;
    </div>
  %end;
  %if;(evar.del="on")
    <iframe style="position:fixed;bottom:0px;right:0px;width:400px;height:120px;background-color:#AAAAAA;" name="ifr">
      <p>The browser does not like IFRAME ! Error $*^ù¤£ùµ€~èàçé</p>
    </iframe>
  %end;
  <div style="clear: both;">
    %base_trailer;
    %copyright;
  </div>
</div>%( the magic Safari div %)
</body>
</html>
